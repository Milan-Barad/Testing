{% style %}
.tab-container {
      max-width: 600px;
      margin: 20px auto;
      border: 1px solid #ccc;
  }
  .tab-buttons {
      display: flex;
      border-bottom: 1px solid #ccc;
  }
  .tab-button {
      flex: 1;
      padding: 10px;
      cursor: pointer;
      background: #f4f4f4;
      border: none;
      outline: none;
  }
  .tab-button:hover {
      background: #ddd;
  }
  .tab-content {
      display: none;
      padding: 20px;
  }
  .tab-content.active {
      display: block;
  }
  .accordion {
      width: 100%;
      margin: 10px 0;
  }
  .accordion-item {
      border: 1px solid #ddd;
      margin-bottom: 5px;
  }
  .accordion-header {
      padding: 10px;
      cursor: pointer;
      background: #f4f4f4;
  }
  .accordion-header:hover {
      background: #ddd;
  }
  .accordion-panel {
      padding: 10px;
      display: none;
  }
  .accordion-panel.active {
      display: block;
  }
{% endstyle %}

<div class="tab-container">
        <div class="tab-buttons">
            {% for collection in collections %}
                <button class="tab-button" onclick="openTab('{{ collection.handle }}')">{{ collection.title }}</button>
            {% endfor %}
        </div>

        {% for collection in collections %}
            <div id="{{ collection.handle }}" class="tab-content" style="display:none;">
                <div class="accordion">
                    {% for product in collection.products %}
                        <div class="accordion-item">
                            <div class="accordion-header" onclick="toggleAccordion('{{ product.handle }}')">{{ product.title }}</div>
                            <div id="{{ product.handle }}" class="accordion-panel">
                                <p>{{ product.description | strip_html | truncate: 100 }}</p>
                                <a href="{{ product.url | within: collection }}">View Product</a>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </div>

<script>
      function openTab(tabName) {
          var i, tabContent, tabButtons;
          tabContent = document.getElementsByClassName("tab-content");
          for (i = 0; i < tabContent.length; i++) {
              tabContent[i].style.display = "none";
          }
          tabButtons = document.getElementsByClassName("tab-button");
          for (i = 0; i < tabButtons.length; i++) {
              tabButtons[i].className = tabButtons[i].className.replace(" active", "");
          }
          document.getElementById(tabName).style.display = "block";
          event.currentTarget.className += " active";
      }

      function toggleAccordion(panelId) {
          var panel = document.getElementById(panelId);
          if (panel.className.indexOf("active") == -1) {
              panel.className += " active";
          } else {
              panel.className = panel.className.replace(" active", "");
          }
      }

      document.getElementsByClassName("tab-button")[0].click();
  </script>

{% schema %}
  {
    "name": "PDP Video Section",
    "disabled_on": {
      "groups": ["header", "footer"]
    },
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Title",
        "default": "What is Lorem Ipsum?"
      },
    ],
    "blocks": [
    {
      "type": "video",
      "name": "Video",
      "settings": [
        {
          "type": "video",
          "id": "video_url",
          "label": "Select Video",
        }
      ]
    }
  ],
  "presets": [
    {
      "name":"PDP Video Section"
    }
  ]
}
{% endschema %}