
<style>
  .accordion-section {
    background: #faebd7;
    padding: 100px 0;
  }
  .accordion-section .page-with {
    max-width: 1200px;
    padding: 0 15px;
    margin: 0 auto;
    width: 100%;
    display: block;
  }
  
  .accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease;
  }
  .accordion-header {
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .accordion-header svg {
    transition: transform 0.3s ease;
  }
</style>

  

<section class="accordion-section">
  <div class="page-with">
    <div class="section-title">
      <h2>{{ section.settings.title }}</h2>
    </div>
    <div class="accordion-list">
      {% for block in section.blocks %}
        {% if block.settings.question != blank %}
          <div class="accordion-box">
              <h6 class="accordion-header">
                How Can I Help You?
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="15" viewBox="0 0 16 15" fill="none">
                  <path class="vertical-line" d="M8 14.3734C7.46055 14.3734 7.02344 13.9363 7.02344 13.3969V0.976562C7.02344 0.437109 7.46055 0 8 0C8.53945 0 8.97656 0.437109 8.97656 0.976562V13.3969C8.97656 13.9363 8.53945 14.3734 8 14.3734Z" fill="black"/>
                  <path d="M14.2094 8.16309H1.78906C1.24961 8.16309 0.8125 7.72598 0.8125 7.18652C0.8125 6.64707 1.24961 6.20996 1.78906 6.20996H14.2094C14.7488 6.20996 15.1859 6.64707 15.1859 7.18652C15.1859 7.72598 14.7488 8.16309 14.2094 8.16309Z" fill="black"/>
                </svg>
              </h6>
              <div class="accordion-content">
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
              </div>
            </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

<script>
    document.addEventListener("DOMContentLoaded", function () {
      const headers = document.querySelectorAll(".accordion-header");
    
      if (headers.length) {
        const firstContent = headers[0].nextElementSibling;
        headers[0].classList.add("active");
        firstContent.style.maxHeight = firstContent.scrollHeight + "px";
        toggleSvgIcon(headers[0], true);
      }
    
      headers.forEach(header => {
        header.addEventListener("click", function () {
          const content = this.nextElementSibling;
          const isOpen = this.classList.contains("active");
    
          document.querySelectorAll(".accordion-content").forEach(c => {
            c.style.maxHeight = null;
            toggleSvgIcon(c.previousElementSibling, false);
            c.previousElementSibling.classList.remove("active");
          });
    
          if (!isOpen) {
            this.classList.add("active");
            content.style.maxHeight = content.scrollHeight + "px";
            toggleSvgIcon(this, true);
          } else {
            this.classList.remove("active");
            content.style.maxHeight = null;
            toggleSvgIcon(this, false);
          }
        });
      });
    
      function toggleSvgIcon(header, isOpen) {
        const verticalLine = header.querySelector("path.vertical-line");
        if (verticalLine) {
          verticalLine.style.opacity = isOpen ? "0" : "1";
        }
      }
    });
</script>

{% schema %}
{
  "name": "Tabs with Accordions",
  "settings": [],
  "blocks": [
    {
      "type": "tab",
      "name": "Tab",
      "settings": [
        { 
          "type": "text", 
          "id": "tab_id", 
          "label": "Tab ID " 
        },
        { 
          "type": "text", 
          "id": "tab_title", 
          "label": "Tab Title"
        }
      ]
    },
    {
      "type": "accordion",
      "name": "Accordion",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer"
        }
      ]
    }
  ],
  "presets": [
    { 
      "name": "Tabs with Accordions" 
    }
  ]
}
{% endschema %}